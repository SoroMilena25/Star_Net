{% extends 'base.html.twig' %}

{% block title %}Profil de {{ user.pseudo }}{% endblock %}

{% block body %}
<style>
.card {
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s;
}

.card:hover {
    transform: translateY(-5px);
}

.card-img-top {
    height: 200px;
    object-fit: cover;
}

.btn {
    width: 100%;
}

.d-flex form {
    width: 45%;
}

h3 {
    margin-top: 30px;
    font-size: 1.5rem;
}
</style>

    <div class="container my-4">
        <!-- Titre du profil -->
        <h1 class="text-center mb-4">Profil de {{ user.pseudo }}</h1>

        <!-- Informations du profil -->
        <div class="row mb-4">
            <div class="col-md-4">
                <div class="card shadow-sm">
                    < img src="{{ user.profile_picture }}" class="card-img-top" alt="Image de profil">
                    <div class="card-body">
                        <h5 class="card-title">{{ user.pseudo }}</h5>
                        <p class="card-text"><strong>Email:</strong> {{ user.email }}</p >
                        <p class="card-text"><strong>Nom:</strong> {{ user.nom }}</p >
                        <p class="card-text"><strong>Prénom:</strong> {{ user.prenom }}</p >
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <!-- Boutons d'abonnement -->
                <div class="d-flex justify-content-between">
                    <form action="{{ path('abonnement_follow', {'idUser': user.id, 'idAbonne': user.id}) }}" method="post">
                        <button type="submit" class="btn btn-primary">Suivre</button>
                    </form>
                    <form action="{{ path('abonnement_unfollow', {'idUser': user.id, 'idAbonnement': user.id}) }}" method="post">
                        <button type="submit" class="btn btn-danger">Se désabonner</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Liste des publications de l'utilisateur -->
        <div>
            <h3>Mes Publications</h3>
            <div class="row">
                {% for publication in publications %}
                    <div class="col-md-4 mb-3">
                        <div class="card shadow-sm">
                            < img src="{{ publication.img }}" class="card-img-top" alt="Publication Image">
                            <div class="card-body">
                                <h5 class="card-title">{{ publication.description|slice(0, 50) }}...</h5>
                                <p class="card-text">Publié le: {{ publication.dateH|date('d/m/Y H:i') }}</p >
                                <form action="{{ path('aime_toggle', {'idUser': user.id, 'idPublication': publication.idPublication}) }}" method="post">
                                    <button type="submit" class="btn btn-outline-success">
                                        {% if publication.aime %}
                                            Déjà aimé
                                        {% else %}
                                            Aimer
                                        {% endif %}
                                    </button>
                                </form>
                                <a href=" 'publication_show', {'id': publication.idPublication}) }}" class="btn btn-info mt-2">Voir la publication</a >
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>


    </div>
{% endblock %}